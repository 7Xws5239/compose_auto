[编码处理](#编码处理)
[数据库级别操作](#数据库级别操作)
[表级别操作](#表级别操作)
[表级别操作之索引管理](#表级别操作之索引管理)
[表数据操作](#表数据操作)
[数据查询包括存储过程](#数据查询包括存储过程)
[用户管理权限管理](#用户管理权限管理)
[备份和恢复数据库](#备份和恢复数据库)

# 编码处理

查看编码信息：
show variables like '%character%';

设置全局编码：
SET GLOBAL character_set_server = 'utf8mb4';

更改客户端和连接的字符集：
SET NAMES 'utf8mb4';

docker容器编码改变（docker级别，设置了之后才可以成功在docker的mysql里面输入中文，默认是不可以的）
（这个办法只能临时改变）(这个才能真正改变character_set_server的值)（这个同时也可以解决navicat里面的中文数据乱码问题）：
export LANG=en_US.UTF-8
查看docker级别编码：
locale

# 数据库级别操作

查看所有数据库：
show databases;

创建数据库：
create database bowmanDB;

使用数据库：
use bowmanDB;

删除数据库：
drop database bowmanDB;

# 表级别操作

列出表：
show tables;

创建表：
create table bowmanTB(
    id int comment '编号',
    name varchar(50) comment '姓名',
    age int comment '年龄',
    gender varchar(3) comment '性别' 
) comment '用户表';

修改表：
alter table tablename modify gender varchar(4);
alter table tablename add testcol int;

查看表结构：
desc tablename;

删除表：
drop table bowmanTB;

# 表级别操作之索引管理

创建索引：create index testindex on tablename(id);
列出索引：show index from tablename;
删除索引：drop index testindex on tablename;

alter实现法：
创建索引：alter table tablename add index testindex(id);
删除索引：alter table tablename drop index testindex;


# 表数据操作

插入表数据：
insert into bowmanTB(id,name,age,gender) 
    values (1,'猪猪侠',12,'男'),
           (2,'超人强',13,'男'),
           (3,'菲菲',14,'女')
;

更新表数据：
update tablename set name='测试名称',gender='秘' where name='';

# 数据查询包括存储过程

创建（无参数和有参数）：
DELIMITER //
CREATE PROCEDURE my_proc()
BEGIN
    SELECT * FROM tablename;
END //
DELIMITER ;

DELIMITER //
CREATE PROCEDURE my_proc2(in gendervalue varchar(3))
BEGIN
    select * from tablename where gender=gendervalue;
END //
DELIMITER ;

使用：
call my_proc();
call my_proc2();

# 用户管理权限管理

查看当前有哪些用户：
use mysql;
select host,user from user;

创建用户：
create user 'testuser'@'localhost';

修改用户密码：
alter user 'testuser'@'localhost' identified with mysql_native_password by '123456';

删除用户：
drop user 'testuser2'@'localhost';

权限查看：
show grants for 'testuser'@'localhost';
show grants for 'testuser'@'%';
需要注意第二种是通配符，但是不包括localhost

授予权限：
grant all on bowmanDB.* to 'testuser'@'localhost';
grant all on *.* to 'testuser'@'localhost';
第二种是授予超级用户权限

撤销权限：
revoke all on bowmanDB.* from 'testuser'@'localhost';
revoke all on *.* from 'testuser'@'localhost';
第二种也就是撤销指定用户的超级用户权限

# 备份和恢复数据库

备份数据库：
mysqldump -u root -p'123456' bowmanDB > /root/backupdata/bowmanDB.sql

恢复数据库：
mysql -u root -p'123456' bowmanDB < root/backupdata/bowmanDB.sql